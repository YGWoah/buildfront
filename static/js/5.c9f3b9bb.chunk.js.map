{"version":3,"sources":["assets/UpVotedBlack.svg","assets/UpVotedBlue.svg","assets/reply.svg","Compenents/Post.js","Compenents/profileSubCompenents/DeletePost.js","Compenents/Home.js"],"names":["module","exports","__webpack_require__","p","Post","props","axios","defaults","withCredentials","upVoteimg","useRef","upVotep","_useState","useState","_useState2","Object","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","postImage","setPostImage","_useState3","pic","_useState4","profileImg","setProfileImg","getProfileImage","_ref","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","post","postID","responseType","then","resp","base64ImageString","Buffer","from","data","toString","catch","err","console","log","stop","apply","this","arguments","getImage","_ref2","_callee2","_context2","res","observer","IntersectionObserver","_ref3","entry","entery","isIntersecting","unobserve","current","root","threshold","useEffect","observe","react__WEBPACK_IMPORTED_MODULE_4___default","createElement","className","ref","react_router_dom__WEBPACK_IMPORTED_MODULE_8__","to","concat","name","src","alt","role","isMyProfile","_profileSubCompenents_DeletePost__WEBPACK_IMPORTED_MODULE_9__","postRef","onClick","textContent","upVotedBlue","style","color","upVotedBlack","content","onError","event","target","display","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","axios__WEBPACK_IMPORTED_MODULE_1__","axios__WEBPACK_IMPORTED_MODULE_1___default","DeletePost","deleteWarning","Fragment","Home","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_3__","posts","setPosts","getcontactposts","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","get","result","LoadMore","callBack","params","length","oldArray","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","setTimeout","error","map","_Post__WEBPACK_IMPORTED_MODULE_5__","userName","account","_homeSubCompenents_Loading__WEBPACK_IMPORTED_MODULE_9__"],"mappings":"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","file":"static/js/5.c9f3b9bb.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/UpVotedBlack.4470e6a8.svg\";","module.exports = __webpack_public_path__ + \"static/media/UpVotedBlue.64b95137.svg\";","module.exports = __webpack_public_path__ + \"static/media/reply.e9f41363.svg\";","import axios from 'axios';\nimport React, {\n  useCallback,\n  useEffect,\n  useRef,\n  useState,\n} from 'react';\nimport reply from '../assets/reply.svg';\nimport upVotedBlack from '../assets/UpVotedBlack.svg';\nimport upVotedBlue from '../assets/UpVotedBlue.svg';\nimport { Link } from 'react-router-dom';\nimport DeletePost from './profileSubCompenents/DeletePost';\n\nconst SERVER = 'http://localhost:3001';\n\nconst Post = (props) => {\n  axios.defaults.withCredentials = true;\n  const upVoteimg = useRef(null);\n  const upVotep = useRef(null);\n  const [postImage, setPostImage] = useState();\n  const [profileImg, setProfileImg] = useState(props.pic);\n  const handleUpVote = () => {\n    if (upVotep.current.textContent != 'Up voted') {\n      upVoteimg.current.src = upVotedBlue;\n      upVotep.current.textContent = 'Up voted';\n      upVotep.current.style.color = '#1E53CF';\n      console.log(upVotep.current);\n    } else {\n      upVoteimg.current.src = upVotedBlack;\n      upVotep.current.textContent = 'Up vote';\n      upVotep.current.style.color = '#000000';\n      console.log(upVotep.current);\n    }\n  };\n\n  const getProfileImage = async () => {\n    await axios\n      .post(\n        `/post/getposterimageprofile`,\n        { postID: props.postID },\n        { responseType: 'arraybuffer' }\n      )\n      .then((resp) => {\n        let base64ImageString = Buffer.from(\n          resp.data,\n          'binary'\n        ).toString('base64');\n        setProfileImg('data:image/png;base64,' + base64ImageString);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  const getImage = async () => {\n    await axios\n      .post(\n        `/post/getpostimage`,\n        { postID: props.postID },\n        { responseType: 'arraybuffer' }\n      )\n      .then((res) => {\n        let base64ImageString = Buffer.from(\n          res.data,\n          'binary'\n        ).toString('base64');\n        setPostImage('data:image/png;base64,' + base64ImageString);\n      });\n  };\n  const deletePost = () => {\n    axios\n      .post('/post/deletepost', {\n        postID: props.postID,\n      })\n      .then((res) => {\n        post.current.style.display = 'none';\n      });\n  };\n  let options = {\n    root: null,\n    threshold: 1.0,\n  };\n  let post = useRef();\n  const callBack = (entry) => {\n    if (entry && entry.isIntersecting) {\n      getProfileImage();\n      getImage();\n      observer.unobserve(post.current);\n    }\n  };\n  let observer = new IntersectionObserver(([entery]) => {\n    callBack(entery);\n  }, options);\n\n  useEffect(() => {\n    observer.observe(post.current);\n  }, []);\n\n  return (\n    <div className=\"post\" ref={post}>\n      <div>\n        <div>\n          <Link to={`/profile/${props.name}`}>\n            <div>\n              <img src={profileImg} alt=\"Profile\" />\n            </div>\n            <div>\n              <h5>{props.name}</h5>\n              <p>{props.role ? 'Student' : 'Teacher'}</p>\n            </div>\n          </Link>\n        </div>\n        {props.isMyProfile ? (\n          <DeletePost postRef={post} postID={props.postID} />\n        ) : (\n          <div onClick={handleUpVote}>\n            <img src={upVotedBlack} alt=\"\" ref={upVoteimg} />\n            <p ref={upVotep}>Up vote</p>\n          </div>\n        )}\n      </div>\n      <div>\n        <p>{props.content}</p>\n      </div>\n      <div>\n        <img\n          src={postImage}\n          onError={(event) => (event.target.style.display = 'none')}\n        />\n      </div>\n      <div>\n        <Link to={`/post/${props.postID}`}>\n          <p>See more</p>\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nexport default Post;\n","import React, { useRef } from 'react';\nimport axios from 'axios';\nconst DeletePost = (props) => {\n  let deleteWarning = useRef();\n\n  const deletePost = () => {\n    axios\n      .post('/post/deletepost', {\n        postID: props.postID,\n      })\n      .then((res) => {\n        props.postRef.current.style.display = 'none';\n      });\n  };\n  return (\n    <React.Fragment>\n      <div\n        onClick={() => {\n          deleteWarning.current.style.display = 'flex';\n        }}\n      >\n        <p>Delete Post</p>\n      </div>\n      <section className=\"delete-warning\" ref={deleteWarning}>\n        <p>Are you sure you want to delete the post ?</p>\n        <div>\n          <button onClick={deletePost}>Delete</button>\n          <button\n            onClick={() => {\n              deleteWarning.current.style.display = 'none';\n            }}\n          >\n            Cancel\n          </button>\n        </div>\n      </section>\n    </React.Fragment>\n  );\n};\n\nexport default DeletePost;\n","import React, { useEffect, useState, useRef } from 'react';\nimport Post from './Post';\nimport './styles/Home/homestyle.css';\nimport './styles/Post/postStyle.css';\nimport axios from 'axios';\nimport Loading from './homeSubCompenents/Loading';\nimport account from '../assets/account.svg';\nimport { setContactPosts } from '../state/actionCreators';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { bindActionCreators } from 'redux';\n\nconst Home = () => {\n  axios.defaults.withCredentials = true;\n  const [posts, setPosts] = useState([]); /*\n  const dispatch = useDispatch()\n  const setPost = bindActionCreators(setContactPosts,dispatch)\n  let contactPosts = useSelector(data=>data.Post.posts)*/\n  let postID = useRef(0);\n  const getcontactposts = async () => {\n    await axios\n      .get(`/post/getcontactposts`)\n      .then((res) => {\n        setPosts(res.data.result);\n        postID.current = res.data.result[2].postID;\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  let options = {\n    root: null,\n    threshold: 0.1,\n  };\n  const getMorePosts = () => {\n    axios\n      .get('/post/getmoreposts', {\n        params: { postID: postID.current },\n      })\n      .then((res) => {\n        console.log(posts);\n        let result = res.data.result;\n        postID.current = result[result.length - 1].postID;\n        setPosts((oldArray) => [...oldArray, ...result]);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n  const LoadMore = useRef();\n  const callBack = (entry) => {\n    if (entry && entry.isIntersecting) {\n      getMorePosts();\n      console.log('kfojf');\n    }\n  };\n  let observer = new IntersectionObserver(([entery]) => {\n    callBack(entery);\n  }, options);\n\n  useEffect(() => {\n    getcontactposts();\n    setTimeout(() => {\n      try {\n        observer.observe(LoadMore.current);\n      } catch (error) {}\n    }, 1000);\n  }, []);\n  return (\n    <div className=\"home\">\n      <div>\n        {posts.length > 0\n          ? posts.map((post) => {\n              return (\n                <Post\n                  name={post.userName}\n                  content={post.content}\n                  role={'Student'}\n                  postID={post.postID}\n                  pic={account}\n                />\n              );\n            })\n          : ''}\n      </div>\n      <Loading ref={LoadMore} />\n      <div ref={LoadMore}></div>\n    </div>\n  );\n};\n\nexport default Home;\n"],"sourceRoot":""}