{"version":3,"sources":["assets/profile_img.png","assets/addPic.svg","Compenents/Settings.js"],"names":["module","exports","__webpack_require__","p","Settings","name","useSelector","data","userInfo","userName","axios","defaults","withCredentials","_useState","useState","preview","undefined","_useState2","Object","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_2__","image","setImage","_useState3","_useState4","fileName","setFileName","firstName","useRef","lastName","bio","password","verifyPassword","prefirstName","preLastName","preBio","getImage","_ref","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_home_yg_Desktop_DevFolders_netlify_front_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","mark","_callee","wrap","_context","prev","next","post","responseType","then","res","console","log","base64ImageString","Buffer","from","toString","catch","err","stop","apply","this","arguments","chnageBorderColor","ref","current","style","borderColor","setTimeout","updatePassword","_ref2","_callee2","_context2","value","succes","submitChanges","_ref3","_callee3","formData","_context3","FormData","append","headers","Content-Type","res2","useEffect","get","result","react__WEBPACK_IMPORTED_MODULE_3___default","createElement","className","src","htmlFor","addPic","id","type","onChange","e","img","URL","createObjectURL","target","files","placeholder","onClick"],"mappings":"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","file":"static/js/10.016692e7.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/profile_img.f52b2b91.png\";","module.exports = __webpack_public_path__ + \"static/media/addPic.df68f50f.svg\";","import React,{useEffect, useRef, useState} from 'react'\nimport profile_img from '../assets/profile_img.png'\nimport './styles/Settings/settingStyle.css'\nimport addPic from '../assets/addPic.svg'\nimport axios from 'axios'\nimport { useSelector } from 'react-redux'\nimport { bindActionCreators } from 'redux'\n\n\nconst Settings = () => {\n  let name = useSelector((data)=>data.userInfo.userName)\n  axios.defaults.withCredentials=true\n  const [image, setImage] = useState({preview:undefined})\n  const [fileName, setFileName] = useState(\"\");\n  const firstName = useRef(null)\n  const lastName = useRef(null)\n  const bio = useRef(null)\n  const password = useRef(null)\n  const verifyPassword = useRef(null)\n  var prefirstName=useRef(),preLastName=useRef(),preBio=useRef();\n  const getImage = async ()=>{\n    await axios.post(`/contact/contactprofileimage`,{userName:name},{responseType: 'arraybuffer'}).then((res)=>{\n        console.log(res);\n        let base64ImageString = Buffer.from(res.data, 'binary').toString('base64')\n\n        setImage({data:undefined,preview:\"data:image/png;base64,\"+base64ImageString});\n    }).catch((err)=>{\n        console.log(err);\n    })\n}\nconst getInfo = ()=>{\n  axios.get(\"/api/allinfo\").then((res)=>{\n    let result =res.data.result\n    prefirstName.current = result.firstName\n    preLastName.current = result.lastName\n    preBio.current = result.bio\n    firstName.current.value=result.firstName\n    lastName.current.value=result.lastName\n    bio.current.value=result.bio\n  })\n}\n\n  const chnageBorderColor = (ref)=>{\n    ref.current.style.borderColor = \"green\"\n    setTimeout(() => {\n      ref.current.style.borderColor = \"\"\n    }, 2000);\n  }\n  \n  const onImageChange = (e) => {\n    const img = {\n      preview: URL.createObjectURL(e.target.files[0]),\n      data: e.target.files[0],\n    }\n    setImage(img)\n    setFileName(e.target.files[0].name);\n  };\n\n  const updatePassword =async ()=>{\n    if(password.current.value==verifyPassword.current.value){\n      await axios.post(`/api/updatepassword`,{password:password.current.value}).then((res)=>{\n        if(res.data.succes){\n          password.current.value=\"\"\n          verifyPassword.current.value=\"\"\n        }\n      })\n    }\n  }\n  const submitChanges = async ()=>{\n    const formData = new FormData()\n    formData.append(\"file\",image.data);\n    formData.append(\"imgname\",fileName)\n    if(password.current.value){\n      updatePassword()\n    }\n    if(image.data){\n      await axios.post(`/api/updateprofilepic`,formData,\n      {headers: {\n        \"Content-Type\": \"multipart/form-data\",\n      }},)\n    }\n    if(firstName.current.value!=prefirstName.current){\n      axios.post(`/api/updateFirstName`,{\n        firstName:firstName.current.value\n      }).then((res2)=>{\n        if(res2.data.succes){\n          prefirstName.current = firstName.current.value\n          chnageBorderColor(firstName)\n        }\n      })\n    }\n    if(lastName.current.value!=preLastName.current){\n      axios.post(`/api/updateLastName`,{\n        lastName:lastName.current.value\n      }).then((res2)=>{\n        if(res2.data.succes){\n          preLastName.current = lastName.current.value\n          chnageBorderColor(lastName)\n        }\n      })\n    }\n    if(bio.current.value!=preBio.current){\n      axios.post(\"/api/updatebio\",{\n        bio:bio.current.value\n      }).then(()=>{\n        preBio.current = bio.current.value\n        chnageBorderColor(bio)\n      })\n    }\n\n  }\n  useEffect(()=>{\n    getImage()\n    getInfo()\n  },[])\n  return (\n    <form className='maxx'>\n        <h5 className='heading'>Settings</h5>\n        <div className='info'>\n          <div className='image'>\n            <img src={image.preview} className='changePic' />\n            <label htmlFor=\"inputTag\">\n              <img src={addPic} className='vectup'/>\n              <input id=\"inputTag\" type=\"file\" onChange={onImageChange}/>\n            </label>\n          </div>\n          <div className='both' >\n            <input type='text'  placeholder='First Name' className='infos' ref={firstName}/>\n            <input type='text'  placeholder='Last Name' className='infos' ref={lastName}/>\n          </div>\n          <div className='both'>\n            <input type='password' ref={password} placeholder='Password' className='infos'/>\n            <input type='password' ref={verifyPassword} placeholder='Verify Password' className='infos'/>\n          </div>\n          <div className='both' >\n            <textarea placeholder='Biography' className='bio' ref={bio} />\n          </div>\n          <div className='both-btn' >\n            <input type='reset' name='cancel' value='Cancel' className='btn-nostroke'/>\n            <input type='button' name='save' value='Save Changes' onClick={submitChanges} className='btn'/>\n          </div>\n        </div>\n    </form>\n  )\n}\n\nexport default Settings"],"sourceRoot":""}